#
# python conf_file_gen.py should have already be run
# PseudoID/settings.conf
#########################

# step 0
# label & plug in the key

# step 1
sc-hsm-tool --initialize --so-pin <so_pin> --pin <pin> --label <project_name>
# > Using reader with a card: Nitrokey Nitrokey HSM (DENK01044660000         ) 00 00

# step 2
cd scripts/hwkey_setup
python init_nitrokey.py

# step 3
python create_pseudokey.py -p <project_name>
# the key file is generated: <project_name>_pseudokey.txt
# this must be saved at a protected place

# step 4
# start from here to add a new hw key to <project_name>, by creating the <project_name>_pseudokey.txt file here, with the right pseudokey
python setup_extend_handler.py -p <project_name> -k <project_key> -v <pwd>

# step 5
# output PseudoID/handler.txt
# then save and delete this: script/hwkey_setup/<project_name>_pseudokey.txt

# Now the key is added to the project (if ALIIAS runs with the right handler file)